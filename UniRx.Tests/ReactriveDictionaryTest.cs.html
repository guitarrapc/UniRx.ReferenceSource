<!DOCTYPE html>
<html><head><title>ReactriveDictionaryTest.cs</title><link rel="stylesheet" href="../styles.css"><script src="../scripts.js"></script></head>
<body class="cB" onload="i(69);"><div class="dH">
<table style="width: 100%">
<tr><td>File: <a id="filePath" class="blueLink" href="/#UniRx.Tests/ReactriveDictionaryTest.cs" target="_top">ReactriveDictionaryTest.cs</a><br/></td><td></td></tr>
<tr><td>Project: <a id="projectPath" class="blueLink" href="/#UniRx.Tests" target="_top">Tests\UniRx.Tests\UniRx.Tests.csproj</a> (UniRx.Tests)</td><td></td></tr>
</table>
</div>
<div class="cz"><table class="tb" cellpadding="0" cellspacing="0"><tr><td valign="top" align="right"><pre id="ln"></pre></td><td valign="top" align="left"><pre id="code">
<b>using</b> <span class="i n">System</span>;
<b>using</b> <span class="i n">Microsoft</span>.<span class="i n">VisualStudio</span>.<span class="i n">TestTools</span>.<span class="i n">UnitTesting</span>;
<b>using</b> <span class="i n">System</span>.<span class="i n">Collections</span>.<span class="i n">Generic</span>;
<b>using</b> <span class="i n">System</span>.<span class="i n">Threading</span>;
 
<b>namespace</b> <span class="i n">UniRx</span>.<span class="i n">Tests</span>
{
    <span class="c">// Move to Unity Tests...</span>
 
    <span class="c">//[TestClass]</span>
    <span class="c">//public class ReactriveDictionaryTest</span>
    <span class="c">//{</span>
    <span class="c">//    [TestMethod]</span>
    <span class="c">//    public void RxDictObserve()</span>
    <span class="c">//    {</span>
    <span class="c">//        var dict = new ReactiveDictionary&lt;string, int&gt;();</span>
 
    <span class="c">//        var count = 0;</span>
    <span class="c">//        DictionaryAddEvent&lt;string, int&gt; addE = default(DictionaryAddEvent&lt;string, int&gt;);</span>
    <span class="c">//        DictionaryRemoveEvent&lt;string, int&gt; removeE = default(DictionaryRemoveEvent&lt;string, int&gt;);</span>
    <span class="c">//        DictionaryReplaceEvent&lt;string, int&gt; replaceE = default(DictionaryReplaceEvent&lt;string, int&gt;);</span>
    <span class="c">//        var resetCount = 0;</span>
 
    <span class="c">//        dict.ObserveCountChanged().Subscribe(x =&gt; count = x);</span>
    <span class="c">//        dict.ObserveAdd().Subscribe(x =&gt; addE = x);</span>
    <span class="c">//        dict.ObserveRemove().Subscribe(x =&gt; removeE = x);</span>
    <span class="c">//        dict.ObserveReplace().Subscribe(x =&gt; replaceE = x);</span>
    <span class="c">//        dict.ObserveReset().Subscribe(x =&gt; resetCount += 1);</span>
 
    <span class="c">//        dict.Add(&quot;a&quot;, 100);</span>
    <span class="c">//        count.Is(1);</span>
    <span class="c">//        addE.Key.Is(&quot;a&quot;); addE.Value.Is(100);</span>
 
    <span class="c">//        dict.Add(&quot;b&quot;, 200);</span>
    <span class="c">//        count.Is(2);</span>
    <span class="c">//        addE.Key.Is(&quot;b&quot;); addE.Value.Is(200);</span>
 
    <span class="c">//        count = -1;</span>
    <span class="c">//        dict[&quot;a&quot;] = 300;</span>
    <span class="c">//        count.Is(-1); // not fired</span>
    <span class="c">//        addE.Key.Is(&quot;b&quot;); // not fired</span>
    <span class="c">//        replaceE.Key.Is(&quot;a&quot;); replaceE.OldValue.Is(100); replaceE.NewValue.Is(300);</span>
 
    <span class="c">//        dict[&quot;c&quot;] = 400;</span>
    <span class="c">//        count.Is(3);</span>
    <span class="c">//        replaceE.Key.Is(&quot;a&quot;); // not fired</span>
    <span class="c">//        addE.Key.Is(&quot;c&quot;); addE.Value.Is(400);</span>
 
    <span class="c">//        dict.Remove(&quot;b&quot;);</span>
    <span class="c">//        count.Is(2);</span>
    <span class="c">//        removeE.Key.Is(&quot;b&quot;); removeE.Value.Is(200);</span>
 
    <span class="c">//        count = -1;</span>
    <span class="c">//        dict.Remove(&quot;z&quot;);</span>
    <span class="c">//        count.Is(-1); // not fired</span>
    <span class="c">//        removeE.Key.Is(&quot;b&quot;); // not fired</span>
 
    <span class="c">//        dict.Clear();</span>
    <span class="c">//        count.Is(0);</span>
    <span class="c">//        resetCount.Is(1);</span>
 
    <span class="c">//        count = -1;</span>
    <span class="c">//        dict.Clear();</span>
    <span class="c">//        resetCount.Is(2);</span>
    <span class="c">//        count.Is(-1); // not fired</span>
    <span class="c">//    }</span>
    <span class="c">//}</span>
}
</pre></td></tr></table></div></body></html>
